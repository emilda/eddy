# AAHYWEH
# Control file for L2 (input) to L3 (output) quality control and corrections.
#
# [General]   - Contains general flags and information
# [Files]     - contains paths and file names
# [FunctionArgs] - contains variable lists and parameters used in correction functions
# [Massman]   - constants used in correcting covariances for spectral attenuation via the Massman analytic solution
# [Soil]      - constants used in correcting Fg for storage
# [Output]    - define optional variable lists for OzFluxL3 output data
#             - define variable list for output to excel
# [Variables] - variable names and quality control keys, only those variables
#               corrected or calculated at this level need to be specified in
#               this control file.
#               Valid quality control sections are:
#                RangeCheck   - reject data less than "Lower" or greater than "Upper"
#                DiurnalCheck - reject data outside Avg(H.h)+/-NumSd*Stdev(H.h) where
#                                Avg(H.h) is the average of all data at time H.h and
#                                Stdev(H.h) is the standard deviation of all data at time H.h
#                                 eg H.h = 8.5 is 0830
#                 NOTE: The "Lower", "Upper" and "NumSd" keywords require a value for each
#                       month of the year (12).  This can be written in shorthand as:
#                        eg "[100]*12" (same value for each month)
#                       or in longhand as:
#                        eg "[100,110,120,130,140,150,150,140,130,120,110,100]" (different each month)
#                ExcludeDates - reject data between specified dates, multiple date ranges can be
#                               specified on separate lines but the lines must be numbered
#                               sequentially from 0 (eg 0, 1, 2 etc)
#                 NOTE: The date range is specified as:
#                        eg "['2010-1-1 00:00','2010-9-16 00:00']"
#                ExcludeHours - reject data at specified times between the specified date range,
#                               multiple ranges can be specified on separate lines but the
#                               lines must be numbered sequentially from 0 (eg 0, 1, 2, etc)
#                 NOTE: The date range and hours to be rejected are specified as:
#                        eg "['2008-04-22 00:00','2008-07-26 23:30',['09:30','10:00','10:30']]"
#                Linear       - apply a linear correction to the data within a date range,
#                               multiple ranges can be specified on separate lines but the
#                               lines must be numbered sequentially from 0 (eg 0, 1, 2, etc)
#                 NOTE: The date range, slope and offset are specified as:
#                        eg "['2010-01-01 00:00','2011-01-01 00:00',1.0,0.0]"
#                Correction   - apply an offset to a wind direction measurement to correct for alignment
#                               multiple ranges can be specified on separate lines but the
#                               lines must be numbered sequentially from 0 (eg 0, 1, 2, etc)
#                 NOTE: The date range and correction are specified as follows:
#                        eg "['2009-1-1 00:00','2010-1-1 00:00',180]"
# [PlotSpec]  - Definition of plot window size.  Adjust until the plots fit comfortably in your display. Optional
# [Plots]     - definition of time series plots
#
[General]
FunctionList = "['do_linear', 'MergeSeriesAh', 'TaFromTv', 'MergeSeriesTa', 'CoordRotation2D', 'CalculateFluxes', 'FhvtoFh', 'Fe_WPL', 'Fc_WPL', 'MergeSeriesFsd', 'CalculateNetRadiation', 'MergeSeriesFn', 'PreCorrectSoilAverage', 'CorrectFgForStorage', 'CalculateAvailableEnergy', 'do_qcchecks']"
# AdelaideRiver:  "['do_linear', 'MergeSeriesAh', 'TaFromTv', 'MergeSeriesTa', 'CoordRotation2D', 'CalculateFluxes', 'FhvtoFh', 'Fe_WPL', 'Fc_WPL', 'CalculateNetRadiation', 'MergeSeriesFn', 'InterpolateOverMissing', 'PreCorrectSoilAverage', 'CorrectFgForStorage', 'CalculateAvailableEnergy', 'do_qcchecks']"
# AliceSpringsMulga:  "['AddMetVars', 'CorrectSWC', 'do_linear', 'CoordRotation2D', 'MassmanApprox', 'Massman', 'CalculateFluxesRM', 'FhvtoFh', 'Fe_WPLcov', 'Fc_WPLcov', 'CorrectFgForStorage', 'PostCorrectSoilAverage', 'do_qcchecks', 'gaps']"
# FoggDam:  "['do_linear', 'MergeSeriesAh', 'TaFromTv', 'MergeSeriesTa', 'CoordRotation2D', 'CalculateFluxes', 'FhvtoFh', 'Fe_WPL', 'Fc_WPL', 'CalculateNetRadiation', 'MergeSeriesFn', 'InterpolateOverMissing', 'PreCorrectSoilAverage', 'CorrectFgForStorage', 'CalculateAvailableEnergy', 'do_qcchecks']"
Platform = PC    # Mac or PC

[Files]
    [[L2]]
        ncFilePath = /Volumes/EcoHydro/TERN-OzFlux/Craig Macfarlane/
        ncFileName = Gingin_0332012_L2.nc
    [[L3]]
        ncFilePath = /Volumes/EcoHydro/TERN-OzFlux/Craig Macfarlane/
        ncFileName = Gingin_0332012_L3.nc
        xlFlagFilePath = /Volumes/EcoHydro/TERN-OzFlux/Craig Macfarlane/
        xlFlagFileName = Gingin_0332012_flagstats_L3.xls
        xlFilePath = /Volumes/EcoHydro/TERN-OzFlux/Craig Macfarlane/
        xlFileName = Gingin_0332012_L3_corrected.xls

[FunctionArgs]
# Site- and process-specific variable and parameter lists
# Flags are named as abbreviated forms of functions in FunctionList
# Ta2Tv: TaFromTv, CF: CalcluateFluxes
# ASBEFg: AverageFgSeriesByElements, ASBETs: AverageTsSeriesByElements, ASBEswc: AverageSWCSeriesByElements
# CFg: CorrectFgForStorage, A3SBE: Average3SeriesByElements, IOM: IntegrateOverMissing
#
# Default Ta2Tv = "['Ta_CSAT','Tv_CSAT','Ah_EC','ps']"
# Default CF = "['Ta_EC','Ah_EC','ps']"
# Default FhvtoFhArgs = "['Ta_EC','Fh','Tv_CSAT','Fe_raw','ps','Ah_EC','Fh_rv']"
# Default FhvtoFhattr = "['Fh rotated and converted from virtual heat flux']"
# Default ASBEFg = Fg_Av   # Output variable
# Default ASBETs = Ts_Av
# Default ASBEswc = Sws_Av
ASBEswc = Sws_Av_01
# Default CFg1Args = "['Fg','Fg_Av','Ts_Av']"  # Output Fg, Input Fg, Input Ts
#IOM = "['Sws_10cm']"  # uncomment for FoggDam
#IOM = "['Sws_5cm']"   # uncomment for AdelaideRiver

#[Massman]
#    zmd = 7.3  # instrument height above displacement plane, d = 2 / 3 * h = 4.3, h = 6.5, z = 11.635 m
#    z0 = 0.8  # roughness length from Brutseart 1982, eqn 5.7: h / z = 3 * e
#    angle = 16  # angle between CSAT3 mounting point and IRGA sensor head mid-path
#    CSATarm = 0.475  # distance from CSAT mounting point to CSAT sensor
#    IRGAarm = 0.315  # distance from CSAT mounting point to IRGA sensor

[Soil]
    FgDepth = 0.08  # Depth of ground heat flux plates, m
    BulkDensity = 1900  # soil bulk density in kg/m3
    OrganicContent = 0.01  # fraction  (% divided by 100)
    SwsDefault = 0.15
    SwsSeries = "['Sws_01']"	

[Output]
#noDefaultXl = True   # uncomment to load controlfile for additional excel output files
L3 = "['Ah_EC', 'Ta_EC', 'ps', 'Cc_7500_Av', 'Fc_wpl', 'Fe_wpl', 'Fh', 'Fsd', 'Fsu', 'albedo', 'Fld', 'Flu', 'Fn', 'Fg', 'Fa', 'Fm', 'Sws_Av_01', 'Ts_Av', 'Ws_CSAT', 'Wd_CSAT_Compass', 'eta', 'theta', 'ustar']"  # comment to load controlfile for additional excel output files
#OFL2 = "['Ah_EC', 'Ta_EC', 'ps', 'Cc_7500_Av', 'Fc_wpl', 'Fe_wpl', 'Fh', 'Fsd', 'Fsu', 'albedo', 'Fld', 'Flu', 'Fn', 'Fg', 'Fa', 'Fm', 'Sws_Av_01', 'Ts_Av', 'Ws_CSAT', 'Wd_CSAT', 'eta', 'theta', 'ustar']"  # uncomment to specify an optional variable list for submission of netCDF at L3 to OzFlux


[Variables]
# Radiation
    [[Fsd]]
        [[[MergeSeries]]]
            Source     = "['Fsd']"
        [[[RangeCheck]]]
            Lower      = "[-10]*12"
            Upper      = "[1500]*12"
#        [[[DiurnalCheck]]]
#            NumSd      = "[5]*12"
    [[Fn]]
        [[[RangeCheck]]]
            Lower      = [-150]*12
            Upper      = [1100]*12
        [[[DiurnalCheck]]]
            NumSd      = "[5]*12"
# Covariances: H2O
    [[UzA]]
        [[[Linear]]]
            0      = "['2011-01-01 00:00','2012-01-01 00:00',1.0,0.0]"
    [[UxA]]
        [[[Linear]]]
            0      = "['2011-01-01 00:00','2012-01-01 00:00',1.0,0.0]"
    [[UyA]]
        [[[Linear]]]
            0      = "['2011-01-01 00:00','2012-01-01 00:00',1.0,0.0]"
# Fluxes
    [[Fh]]
        [[[RangeCheck]]]
            Lower      = "[-100]*12"
            Upper      = "[600]*12"
        [[[DiurnalCheck]]]
            NumSd      = "[5]*12"
    [[Fe_wpl]]
        [[[RangeCheck]]]
            Lower      = "[-100]*12"
            Upper      = "[600]*12"
        [[[DiurnalCheck]]]
            NumSd      = "[5]*12"
    [[Fc_wpl]]
        [[[RangeCheck]]]
            Lower      = "[-2,-2,-2,-3,-3,-3,-2,-2,-2,-4,-4,-4]"
            Upper      = "[2]*12"
        [[[DiurnalCheck]]]
            NumSd      = "[5]*12"
    [[Fm]]
        [[[RangeCheck]]]
            Lower      = "[-1]*12"
            Upper      = "[1]*12"
        [[[DiurnalCheck]]]
            NumSd      = "[5]*12"
    [[ustar]]
        [[[RangeCheck]]]
            Lower      = "[0]*12"
            Upper      = "[2]*12"
        [[[DiurnalCheck]]]
            NumSd      = "[5]*12"
# Meteorology: LI-7500
    [[Cc_7500_Av]]
        [[[Linear]]]
            0      = "['2011-01-01 00:00','2012-01-01 00:00',1.0,0.0]"
        [[[DiurnalCheck]]]
            NumSd      = "[5]*12"

    [[Ah_7500_Av]]
        [[[Linear]]]
            0      = "['2011-01-01 00:00','2012-01-01 00:00',1.0,0.0]"
        [[[DiurnalCheck]]]
            NumSd      = "[5]*12"

# Meteorology: Air temperature
    [[Ta_EC]]
        [[[MergeSeries]]]
            Source     = "['Ta_HMP_01','Ta_CSAT']"     # Example series for MergeSeriesTa
#            Source     = "['Ta_HMP_01']"     # Default series for MergeSeriesTa
        [[[RangeCheck]]]
            Lower      = "[0]*12"
            Upper      = "[50]*12"
        [[[DiurnalCheck]]]
            NumSd      = "[5]*12"
# Meteorology: Absolute humidity
    [[Ah_EC]]
        [[[MergeSeries]]]
            Source     = "['Ah_HMP_01','Ah_7500_Av']"     # Example series for MergeSeriesAh
#            Source     = "['Ah_HMP_01']"     # Default series for MergeSeriesAh
        [[[RangeCheck]]]
            Lower      = "[5]*12"
            Upper      = "[25]*12"
        [[[DiurnalCheck]]]
            NumSd      = "[6]*12"
# Soil: Ground heat flux
    [[Fg]]
        [[[RangeCheck]]]
            Lower      = "[-300]*12"
            Upper      = "[300]*12"
    [[Fg_Av]]														    
        [[[AverageSeries]]]
            Source = "['Fg_01','Fg_02','Fg_03']"
#            Source = "['Fg_01']"      #  Default
    [[Ts_Av]]														    
        [[[AverageSeries]]]
	    Source = "['Ts_01','Ts_02','Ts_03']"
#            Source = "['Ts_01']"      #  Default
    [[Sws_Av_01]]													    
        [[[AverageSeries]]]
#            Source = "['Sws_01']"      #  Default

#[PlotSpec]      # Specify the height and width of plot windows by uncommenting all three lines.  Defaults are PlotWidth = 13 and PlotHeight = 9
#Width = 23.5
#Height = 11.5

[Plots]
    [[1]]
        Title = "Radiative fluxes"
        Variables = "['Flu', 'Fld', 'albedo', 'Fsu', 'Fsd']"
#        YLMin = "['Auto','Auto','Auto','0','Auto']"     # dimensions of the individual plots
#        YLMax = "['Auto','Auto','Auto','50','Auto']"   # all four lines must be uncommented to use
#        YRMin = "['Auto','Auto','Auto','0','Auto']"     # the number of items in these four lists must be equal
#        YRMax = "['Auto','Auto','Auto','50','Auto']"   #     to the number of items in the Variables list
    [[2]]
        Title = "Energy balance"
        Variables = "['Fe_wpl', 'Fh', 'Fg_Av', 'Fn']"
    [[3]]
        Title = "Carbon and momentum fluxes"
        Variables = "['Fc_wpl', 'ustar', 'Fm']"
    [[4]]
        Title = "Air temperature, humidity and CO2"
        Variables = "['Ta_EC', 'Ah_EC', 'Cc_7500_Av']"
    [[5]]
        Title = "Soil temperature, water content and heat flux"
        Variables = "['Fg', 'Ts_Av', 'Sws_Av_01']"
    [[6]]
        Title = "Pressure, wind speed and direction"
        Variables = "['ps', 'Ws_CSAT', 'Wd_CSAT', 'Ux', 'Uy', 'Uz']"
    [[7]]
        Type = xy
        Title = "xy plots:  Ah"
        XSeries = "['Ah_EC']"
        YSeries = "['Ah_7500_Av']"
